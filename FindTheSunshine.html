<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Holiday Weather Planner: Find the Sun!</title>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <link
      href="https://fonts.googleapis.com/css?family=Pacifico|Quicksand"
      rel="stylesheet"
    />

    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
      integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T"
      crossorigin="anonymous"
    />
    <link
      rel="stylesheet"
      href="https://use.fontawesome.com/releases/v5.8.1/css/all.css"
      integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf"
      crossorigin="anonymous"
    />
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>

    <style>
      h1 {
        font-family: "Pacifico", cursive;
        color: #ffffff;
        background-color: #ffa000;
      }
      h2 {
        font-family: "Pacifico", cursive;
        color: #ffecb3;
        background-color: #ffc107;
      }
      .localCityBox {
        font-family: "Quicksand", sans-serif;
        background-color: #ffc107;
        color: #212121;
      }
      .sunnyCities {
        font-family: "Quicksand", sans-serif;
        background-color: #ffc107;
        color: #212121;
      }
      .search.Current {
        font-family: "Quicksand", sans-serif;
      }
      .button-current {
        font-family: "Quicksand", sans-serif;
      }
    </style>
  </head>
  <title>Find The Sun</title>
  <body>
    <h1>Where is it sunny?</h1>

    <form class="search-current">
      <input
        type="search"
        placeholder="Which city is calling you?"
        autocomplete="off"
        value=""
      />
      <input type="submit" class="button-current btn-info" value="Search" />
    </form>
    <hr />

    <h1>Current Weather</h1>

    <div class="localCityBox">
      <div class="current-location">Location<div>
      <div class="timeNow">Time</div>
      <div class="lead main-weather">
        <span class="temperature-main">Temp</span> |
        <span class="wind-speed-main">Wind Speed</span>
      </div>
      <div class="container detailed-weather">
        <div class="description-main">Description</div>
        <div class="percipitation-main">Perc</div>
      </div>
      
    </div>
    <br />
    <h2>Need Inspiration?</h2>
    <div class="sunnyCities row">
      <div class="cityBox1 col-sm-4">
        <h3>Lisbon</h3>
        <h4>Portugal</h4>
        <p>12 hours of sun</p>
        <img src="" class="imgBox" />
        <p>18ºC</p>
      </div>
      <div class="cityBox2 col-sm-4">
        <h3>Cape Town</h3>
        <h4>South Africa</h4>
        <p>12 hours of sun</p>
        <img src="" class="imgBox" />
        <p>18ºC</p>
      </div>
      <div class="cityBox3 col-sm-4">
        <h3>Sydney</h3>
        <h4>Australia</h4>
        <p>12 hours of sun</p>
        <img src="" class="imgBox" />
        <p>18ºC</p>
      </div>
    </div>
    <br />
    <div class="newCity">
      <button type="button" class="btn btn-info">Add a new location!</button>
    </div>
  </body>
  <script>
    let now = new Date();
    console.log(now);

    function formatDate(date) {
      let weekDays = [
        "Sunday",
        "Monday",
        "Tuesday",
        "Wednesday",
        "Thursday",
        "Friday",
        "Saturday"
      ];

      let weekNow = weekDays[now.getDay()];
      let hoursNow = now.getHours();
      let minutesNow = now.getMinutes();

      if (minutesNow < 10) {
        return `0${minutesNow}`;
      }

      if (hoursNow < 10) {
        periodTime = "AM";
        hoursNow = `0${hoursNow}`;
      } else {
        periodTime = "PM";
      }

      let findTime = `${weekNow} ${hoursNow}:${minutesNow} ${periodTime}`;

      let timeNow = document.querySelector(".timeNow");
      timeNow.innerHTML = `${findTime}`;

      let timeCurrentLocation = document.querySelector(
        ".current-time-location"
      );
      timeCurrentLocation.innerHTML = `${hoursNow}:${minutesNow}`;
    }

    let nowDate = formatDate(now);

    let apiKey = "e4cc36c73832c7c7ff16bb720a49e759";
    console.log(axios);

    let apiUrl = "https://api.openweathermap.org/data/2.5";
    let apiPath = "weather";
    let city = "Lisbon";
    let apiParams = `q=${city}&appid=${apiKey}`;

    axios.get(`${url}/${path}?${apiParams}`).then(function(response) {
      let currentTemperature = Math.round(response.data.main.temp);
      let currentWindSpeed = `${response.data.wind.speed}`;
      let description = response.data.weather[0].description;
      let currentPericipation = response.data.rain;
      let location = document.querySelector(".current-location");
      location.innerHTML = city;
      let mainTemperature = document.querySelector(".temperature-main");
      let mainWindSpeed = document.querySelector(".wind-speed-main");
      let mainDescription = document.querySelector(".description-main");
      let mainPercipitation = document.querySelector(".percipitation-main");
      mainTemperature.innerHTML = `Temp: ${currentTemperature} C`;
      mainWindSpeed.innerHTML = `Wind Speed: ${currentWindSpeed} m/s`;
      mainPercipitation.innerHTML = `${currentPericipation}`;
    });
  </script>
</html>
